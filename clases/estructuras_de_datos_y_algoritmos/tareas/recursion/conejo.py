def walkAux(board):

def walk(xdes,ydes,board,score):
    if xdes>=len(borad) and ydes>=len(borad):return score 
        if xdes>=len(borad)
    else:
      #tmp puntos actuales
      if score>tmp:
        return walk(xdes,ydes,board,tmp)
def main():
    n,m=input().split(" ")
    c,a=input().split(" ")
    carrot="#"#input("carrot character")
    apple="*"#input("apple caharcter")
    scoreTable={".":0,carrot:c,apple:a}
    board=[]
    for i in range(n):
        tmp=input().split(" ")
        #if len(tmp)==m:
        board.append(tmp)
    charMap=